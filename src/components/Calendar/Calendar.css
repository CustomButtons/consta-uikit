.Calendar {
  --cell-size: 28px;
  --cell-padding-left: var(--space-xs);
  --cell-bg-side-offset: calc(var(--cell-padding-left) / 2);
  --space-between-weeks: var(--space-xs);
  --color-bg-selected-primary: var(--color-control-bg-primary);
  --color-bg-selected-secondary: var(--color-control-bg-ghost);
  --color-bg-hovered: var(--color-control-bg-primary-hover);
  --color-text-selected: var(--color-control-typo-primary);
  --color-text-hovered: var(--color-control-typo-primary-hover);
  --day-bg-color: transparent;
  --day-text-color: var(--color-control-typo-default);
  --z-date: 0;
  --z-date-bg: calc(var(--z-date) - 1);
  --z-date-sub-bg: calc(var(--z-date-bg) - 1);
  display: flex;
  padding-top: var(--space-xl);
  padding-bottom: var(--space-m);
}

.Calendar-Title {
  margin-bottom: var(--space-s);
}

.Calendar-Month {
  display: flex;
  flex-direction: column;

  & + & {
    margin-left: var(--space-m);
  }
}

.Calendar-Weeks {
  --max-weeks-in-month: 6;
  min-height: calc(
    (var(--cell-size) * var(--max-weeks-in-month)) +
      (var(--space-between-weeks) * (var(--max-weeks-in-month) - 1))
  );
}

.Calendar-Row {
  display: flex;

  & + & {
    margin-top: var(--space-between-weeks);
  }

  &_withDaynames + & {
    margin-top: var(--space-s);
  }
}

.Calendar-Cell {
  box-sizing: content-box;
  width: var(--cell-size);
  height: var(--cell-size);
  outline: none;
  text-align: center;

  &_weekDay {
    height: 20px;
  }

  & + & {
    padding-left: var(--cell-padding-left);
  }

  &_selectable .Calendar-CellContent {
    cursor: pointer;
  }

  &_disabled .Calendar-CellContent {
    --day-text-color: var(--color-control-typo-disable);
    cursor: not-allowed;
  }

  &_today .Calendar-CellContent::after {
    --color-today: var(--color-bg-selected-primary);
    content: '';
    position: absolute;
    z-index: var(--z-date-bg);
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    border: 1px solid var(--color-today);
    border-radius: 50%;
  }

  &_today .Calendar-CellContent:hover::after {
    --color-today: var(--color-bg-hovered);
  }

  &_single .Calendar-CellContent::before {
    content: '';
    position: absolute;
    z-index: var(--z-date-sub-bg);
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    background-color: var(--day-bg-color);
    border-radius: 50%;
  }

  &_single&_selected .Calendar-CellContent {
    --day-text-color: var(--color-text-selected);
  }

  &_single&_selected .Calendar-CellContent::before {
    --day-bg-color: var(--color-bg-selected-primary);
  }

  &_single:not(&_disabled) .Calendar-CellContent:hover {
    --day-text-color: var(--color-text-hovered);
  }

  &_single:not(&_disabled) .Calendar-CellContent:hover::before {
    --day-bg-color: var(--color-bg-hovered);
  }

  &_range .Calendar-CellContent::before {
    content: '';
    position: absolute;
    z-index: var(--z-date-sub-bg);
    top: 0;
    right: calc(var(--cell-bg-side-offset) * -1);
    left: calc(var(--cell-bg-side-offset) * -1);
    bottom: 0;
    background-color: var(--day-bg-color);
  }

  &_range:first-child .Calendar-CellContent::before {
    left: 0;
  }

  &_range:last-child .Calendar-CellContent::before {
    right: 0;
  }

  &_range .Calendar-CellContent::after {
    content: '';
    position: absolute;
    z-index: var(--z-date-bg);
    top: 0;
    right: 0;
    left: 0;
    bottom: 0;
    background-color: var(--day-bg-color);
  }

  &_range&_selected&_first:not(&_oneValue) .Calendar-CellContent::before,
  &_range&_selected&_last:not(&_oneValue) .Calendar-CellContent::before {
    --day-bg-color: var(--color-bg-selected-secondary);
  }

  &_range&_selected&_first:not(&_selectedBackwards) .Calendar-CellContent::before {
    left: 0;
    border-top-left-radius: 50%;
    border-bottom-left-radius: 50%;
  }

  &_range&_selected&_first&_selectedBackwards .Calendar-CellContent::before,
  &_range&_selected&_last .Calendar-CellContent::before {
    right: 0;
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
  }

  &_range&_selected&_first .Calendar-CellContent,
  &_range&_selected&_last .Calendar-CellContent {
    --day-text-color: var(--color-text-selected);
  }

  &_range&_selected&_first .Calendar-CellContent::after,
  &_range&_selected&_last .Calendar-CellContent::after {
    --day-bg-color: var(--color-bg-selected-primary);
    border-radius: 50%;
  }

  &_range&_selected:not(&_first):not(&_last) .Calendar-CellContent::before {
    --day-bg-color: var(--color-bg-selected-secondary);
  }

  &_range&_selected&_oneValue .Calendar-CellContent::before {
    right: 0;
    border-radius: 50%;
  }

  &_range&_isHighlighted .Calendar-CellContent::before {
    --day-bg-color: var(--color-bg-selected-secondary);
  }

  &_range&_isHighlighted&_first:not(&_selectedBackwards) .Calendar-CellContent::before {
    right: calc(var(--cell-bg-side-offset) * -1);
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  &_range&_isHighlighted&_first:not(&_selectedBackwards).lastWeekDay .Calendar-CellContent::before {
    right: 0;
  }

  &_range&_isHighlighted&_first&_selectedBackwards .Calendar-CellContent::before {
    right: 0;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  &_range&_isHighlighted&_oneValue:not(&_first):not(&_selectedBackwards):hover
    .Calendar-CellContent::after {
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
  }

  &_range&_isHighlighted&_oneValue:not(&_first)&_selectedBackwards:hover
    .Calendar-CellContent::after {
    border-top-left-radius: 50%;
    border-bottom-left-radius: 50%;
  }

  &_range&_isHighlighted:not(&_selectedBackwards):hover .Calendar-CellContent::before {
    right: 0;
    border-top-right-radius: 50%;
    border-bottom-right-radius: 50%;
  }

  &_range&_isHighlighted&_selectedBackwards:hover .Calendar-CellContent::before {
    left: 0;
    border-top-left-radius: 50%;
    border-bottom-left-radius: 50%;
  }

  &_range:not(&_disabled) .Calendar-CellContent:hover {
    --day-text-color: var(--color-text-hovered);
  }

  &_range:not(&_disabled) .Calendar-CellContent:hover::after {
    --day-bg-color: var(--color-bg-hovered);
    border-radius: 50%;
  }
}

.Calendar-CellContent {
  position: relative;
  z-index: var(--z-date);
  display: flex;
  justify-content: center;
  align-items: center;
  width: 100%;
  height: 100%;
}

.Calendar-CellContentText {
  color: var(--day-text-color);
}
